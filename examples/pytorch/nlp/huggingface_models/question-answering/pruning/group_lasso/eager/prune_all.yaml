

model:
  name: bert_prune
  framework: pytorch

pruning:
  approach:
    weight_compression:
      initial_sparsity: 0.0
      target_sparsity: 0.7
      start_epoch: 0
      end_epoch: 4
      pruners:
        - !Pruner
            start_epoch: 0
            end_epoch: 4
            target_sparsity: 0.7
            prune_type: group_lasso
            update_frequency: 1
            parameters: {
                alpha: 0.006,
                pattern: tile_pattern_1x2
            }
            names: ['bert.encoder.layer.0.attention.output.dense.weight',
                    'bert.encoder.layer.0.attention.self.key.weight',
                    'bert.encoder.layer.0.attention.self.query.weight',
                    'bert.encoder.layer.0.attention.self.value.weight',
                    'bert.encoder.layer.0.intermediate.dense_act.weight',
                    'bert.encoder.layer.0.output.dense.weight',
                    'bert.encoder.layer.1.attention.output.dense.weight',
                    'bert.encoder.layer.1.attention.self.key.weight',
                    'bert.encoder.layer.1.attention.self.query.weight',
                    'bert.encoder.layer.1.attention.self.value.weight',
                    'bert.encoder.layer.1.intermediate.dense_act.weight',
                    'bert.encoder.layer.1.output.dense.weight',
                    'bert.encoder.layer.2.attention.output.dense.weight',
                    'bert.encoder.layer.2.attention.self.key.weight',
                    'bert.encoder.layer.2.attention.self.query.weight',
                    'bert.encoder.layer.2.attention.self.value.weight',
                    'bert.encoder.layer.2.intermediate.dense_act.weight',
                    'bert.encoder.layer.2.output.dense.weight',
                    'bert.encoder.layer.3.attention.output.dense.weight',
                    'bert.encoder.layer.3.attention.self.key.weight',
                    'bert.encoder.layer.3.attention.self.query.weight',
                    'bert.encoder.layer.3.attention.self.value.weight',
                    'bert.encoder.layer.3.intermediate.dense_act.weight',
                    'bert.encoder.layer.3.output.dense.weight',
                    'bert.encoder.layer.4.attention.output.dense.weight',
                    'bert.encoder.layer.4.attention.self.key.weight',
                    'bert.encoder.layer.4.attention.self.query.weight',
                    'bert.encoder.layer.4.attention.self.value.weight',
                    'bert.encoder.layer.4.intermediate.dense_act.weight',
                    'bert.encoder.layer.4.output.dense.weight',
                    'bert.encoder.layer.5.attention.output.dense.weight',
                    'bert.encoder.layer.5.attention.self.key.weight',
                    'bert.encoder.layer.5.attention.self.query.weight',
                    'bert.encoder.layer.5.attention.self.value.weight',
                    'bert.encoder.layer.5.intermediate.dense_act.weight',
                    'bert.encoder.layer.5.output.dense.weight',
                    'bert.encoder.layer.6.attention.output.dense.weight',
                    'bert.encoder.layer.6.attention.self.key.weight',
                    'bert.encoder.layer.6.attention.self.query.weight',
                    'bert.encoder.layer.6.attention.self.value.weight',
                    'bert.encoder.layer.6.intermediate.dense_act.weight',
                    'bert.encoder.layer.6.output.dense.weight',
                    'bert.encoder.layer.7.attention.output.dense.weight',
                    'bert.encoder.layer.7.attention.self.key.weight',
                    'bert.encoder.layer.7.attention.self.query.weight',
                    'bert.encoder.layer.7.attention.self.value.weight',
                    'bert.encoder.layer.7.intermediate.dense_act.weight',
                    'bert.encoder.layer.7.output.dense.weight',
                    'bert.encoder.layer.8.attention.output.dense.weight',
                    'bert.encoder.layer.8.attention.self.key.weight',
                    'bert.encoder.layer.8.attention.self.query.weight',
                    'bert.encoder.layer.8.attention.self.value.weight',
                    'bert.encoder.layer.8.intermediate.dense_act.weight',
                    'bert.encoder.layer.8.output.dense.weight',
                    'bert.encoder.layer.9.attention.output.dense.weight',
                    'bert.encoder.layer.9.attention.self.key.weight',
                    'bert.encoder.layer.9.attention.self.query.weight',
                    'bert.encoder.layer.9.attention.self.value.weight',
                    'bert.encoder.layer.9.intermediate.dense_act.weight',
                    'bert.encoder.layer.9.output.dense.weight',
                    'bert.encoder.layer.10.attention.output.dense.weight',
                    'bert.encoder.layer.10.attention.self.key.weight',
                    'bert.encoder.layer.10.attention.self.query.weight',
                    'bert.encoder.layer.10.attention.self.value.weight',
                    'bert.encoder.layer.10.intermediate.dense_act.weight',
                    'bert.encoder.layer.10.output.dense.weight',
                    'bert.encoder.layer.11.attention.output.dense.weight',
                    'bert.encoder.layer.11.attention.self.key.weight',
                    'bert.encoder.layer.11.attention.self.query.weight',
                    'bert.encoder.layer.11.attention.self.value.weight',
                    'bert.encoder.layer.11.intermediate.dense_act.weight',
                    'bert.encoder.layer.11.output.dense.weight',
                    'bert.encoder.layer.12.attention.output.dense.weight',
                    'bert.encoder.layer.12.attention.self.key.weight',
                    'bert.encoder.layer.12.attention.self.query.weight',
                    'bert.encoder.layer.12.attention.self.value.weight',
                    'bert.encoder.layer.12.intermediate.dense_act.weight',
                    'bert.encoder.layer.12.output.dense.weight',
                    'bert.encoder.layer.13.attention.output.dense.weight',
                    'bert.encoder.layer.13.attention.self.key.weight',
                    'bert.encoder.layer.13.attention.self.query.weight',
                    'bert.encoder.layer.13.attention.self.value.weight',
                    'bert.encoder.layer.13.intermediate.dense_act.weight',
                    'bert.encoder.layer.13.output.dense.weight',
                    'bert.encoder.layer.14.attention.output.dense.weight',
                    'bert.encoder.layer.14.attention.self.key.weight',
                    'bert.encoder.layer.14.attention.self.query.weight',
                    'bert.encoder.layer.14.attention.self.value.weight',
                    'bert.encoder.layer.14.intermediate.dense_act.weight',
                    'bert.encoder.layer.14.output.dense.weight',
                    'bert.encoder.layer.15.attention.output.dense.weight',
                    'bert.encoder.layer.15.attention.self.key.weight',
                    'bert.encoder.layer.15.attention.self.query.weight',
                    'bert.encoder.layer.15.attention.self.value.weight',
                    'bert.encoder.layer.15.intermediate.dense_act.weight',
                    'bert.encoder.layer.15.output.dense.weight',
                    'bert.encoder.layer.16.attention.output.dense.weight',
                    'bert.encoder.layer.16.attention.self.key.weight',
                    'bert.encoder.layer.16.attention.self.query.weight',
                    'bert.encoder.layer.16.attention.self.value.weight',
                    'bert.encoder.layer.16.intermediate.dense_act.weight',
                    'bert.encoder.layer.16.output.dense.weight',
                    'bert.encoder.layer.17.attention.output.dense.weight',
                    'bert.encoder.layer.17.attention.self.key.weight',
                    'bert.encoder.layer.17.attention.self.query.weight',
                    'bert.encoder.layer.17.attention.self.value.weight',
                    'bert.encoder.layer.17.intermediate.dense_act.weight',
                    'bert.encoder.layer.17.output.dense.weight',
                    'bert.encoder.layer.18.attention.output.dense.weight',
                    'bert.encoder.layer.18.attention.self.key.weight',
                    'bert.encoder.layer.18.attention.self.query.weight',
                    'bert.encoder.layer.18.attention.self.value.weight',
                    'bert.encoder.layer.18.intermediate.dense_act.weight',
                    'bert.encoder.layer.18.output.dense.weight',
                    'bert.encoder.layer.19.attention.output.dense.weight',
                    'bert.encoder.layer.19.attention.self.key.weight',
                    'bert.encoder.layer.19.attention.self.query.weight',
                    'bert.encoder.layer.19.attention.self.value.weight',
                    'bert.encoder.layer.19.intermediate.dense_act.weight',
                    'bert.encoder.layer.19.output.dense.weight',
                    'bert.encoder.layer.20.attention.output.dense.weight',
                    'bert.encoder.layer.20.attention.self.key.weight',
                    'bert.encoder.layer.20.attention.self.query.weight',
                    'bert.encoder.layer.20.attention.self.value.weight',
                    'bert.encoder.layer.20.intermediate.dense_act.weight',
                    'bert.encoder.layer.20.output.dense.weight',
                    'bert.encoder.layer.21.attention.output.dense.weight',
                    'bert.encoder.layer.21.attention.self.key.weight',
                    'bert.encoder.layer.21.attention.self.query.weight',
                    'bert.encoder.layer.21.attention.self.value.weight',
                    'bert.encoder.layer.21.intermediate.dense_act.weight',
                    'bert.encoder.layer.21.output.dense.weight',
                    'bert.encoder.layer.22.attention.output.dense.weight',
                    'bert.encoder.layer.22.attention.self.key.weight',
                    'bert.encoder.layer.22.attention.self.query.weight',
                    'bert.encoder.layer.22.attention.self.value.weight',
                    'bert.encoder.layer.22.intermediate.dense_act.weight',
                    'bert.encoder.layer.22.output.dense.weight',
                    'bert.encoder.layer.23.attention.output.dense.weight',
                    'bert.encoder.layer.23.attention.self.key.weight',
                    'bert.encoder.layer.23.attention.self.query.weight',
                    'bert.encoder.layer.23.attention.self.value.weight',
                    'bert.encoder.layer.23.intermediate.dense_act.weight',
                    'bert.encoder.layer.23.output.dense.weight',
                    'qa_outputs.weight',
                  ]

